{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _numericn = _interopRequireDefault(require(\"./numericn\"));\nvar _writableTrackingBuffer = _interopRequireDefault(require(\"../tracking-buffer/writable-tracking-buffer\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nconst NULL_LENGTH = Buffer.from([0x00]);\nconst Numeric = {\n  id: 0x3F,\n  type: 'NUMERIC',\n  name: 'Numeric',\n  declaration: function (parameter) {\n    return 'numeric(' + this.resolvePrecision(parameter) + ', ' + this.resolveScale(parameter) + ')';\n  },\n  resolvePrecision: function (parameter) {\n    if (parameter.precision != null) {\n      return parameter.precision;\n    } else if (parameter.value === null) {\n      return 1;\n    } else {\n      return 18;\n    }\n  },\n  resolveScale: function (parameter) {\n    if (parameter.scale != null) {\n      return parameter.scale;\n    } else {\n      return 0;\n    }\n  },\n  generateTypeInfo(parameter) {\n    let precision;\n    if (parameter.precision <= 9) {\n      precision = 0x05;\n    } else if (parameter.precision <= 19) {\n      precision = 0x09;\n    } else if (parameter.precision <= 28) {\n      precision = 0x0D;\n    } else {\n      precision = 0x11;\n    }\n    return Buffer.from([_numericn.default.id, precision, parameter.precision, parameter.scale]);\n  },\n  generateParameterLength(parameter, options) {\n    if (parameter.value == null) {\n      return NULL_LENGTH;\n    }\n    const precision = parameter.precision;\n    if (precision <= 9) {\n      return Buffer.from([0x05]);\n    } else if (precision <= 19) {\n      return Buffer.from([0x09]);\n    } else if (precision <= 28) {\n      return Buffer.from([0x0D]);\n    } else {\n      return Buffer.from([0x11]);\n    }\n  },\n  *generateParameterData(parameter, options) {\n    if (parameter.value == null) {\n      return;\n    }\n    const sign = parameter.value < 0 ? 0 : 1;\n    const value = Math.round(Math.abs(parameter.value * Math.pow(10, parameter.scale)));\n    if (parameter.precision <= 9) {\n      const buffer = Buffer.alloc(5);\n      buffer.writeUInt8(sign, 0);\n      buffer.writeUInt32LE(value, 1);\n      yield buffer;\n    } else if (parameter.precision <= 19) {\n      const buffer = new _writableTrackingBuffer.default(10);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      yield buffer.data;\n    } else if (parameter.precision <= 28) {\n      const buffer = new _writableTrackingBuffer.default(14);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    } else {\n      const buffer = new _writableTrackingBuffer.default(18);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    }\n  },\n  validate: function (value) {\n    if (value == null) {\n      return null;\n    }\n    value = parseFloat(value);\n    if (isNaN(value)) {\n      throw new TypeError('Invalid number.');\n    }\n    return value;\n  }\n};\nvar _default = Numeric;\nexports.default = _default;\nmodule.exports = Numeric;","map":{"version":3,"names":["_numericn","_interopRequireDefault","require","_writableTrackingBuffer","NULL_LENGTH","Buffer","from","Numeric","id","type","name","declaration","parameter","resolvePrecision","resolveScale","precision","value","scale","generateTypeInfo","default","generateParameterLength","options","generateParameterData","sign","Math","round","abs","pow","buffer","alloc","writeUInt8","writeUInt32LE","writeUInt64LE","data","validate","parseFloat","isNaN","TypeError","module","exports"],"sources":["/Users/shahwalikhan/Desktop/my-app/node_modules/tedious/src/data-types/numeric.ts"],"sourcesContent":["import { DataType } from '../data-type';\nimport NumericN from './numericn';\nimport WritableTrackingBuffer from '../tracking-buffer/writable-tracking-buffer';\n\nconst NULL_LENGTH = Buffer.from([0x00]);\n\nconst Numeric: DataType & { resolveScale: NonNullable<DataType['resolveScale']>, resolvePrecision: NonNullable<DataType['resolvePrecision']> } = {\n  id: 0x3F,\n  type: 'NUMERIC',\n  name: 'Numeric',\n\n  declaration: function(parameter) {\n    return 'numeric(' + (this.resolvePrecision(parameter)) + ', ' + (this.resolveScale(parameter)) + ')';\n  },\n\n  resolvePrecision: function(parameter) {\n    if (parameter.precision != null) {\n      return parameter.precision;\n    } else if (parameter.value === null) {\n      return 1;\n    } else {\n      return 18;\n    }\n  },\n\n  resolveScale: function(parameter) {\n    if (parameter.scale != null) {\n      return parameter.scale;\n    } else {\n      return 0;\n    }\n  },\n\n  generateTypeInfo(parameter) {\n    let precision;\n    if (parameter.precision! <= 9) {\n      precision = 0x05;\n    } else if (parameter.precision! <= 19) {\n      precision = 0x09;\n    } else if (parameter.precision! <= 28) {\n      precision = 0x0D;\n    } else {\n      precision = 0x11;\n    }\n\n    return Buffer.from([NumericN.id, precision, parameter.precision!, parameter.scale!]);\n  },\n\n  generateParameterLength(parameter, options) {\n    if (parameter.value == null) {\n      return NULL_LENGTH;\n    }\n\n    const precision = parameter.precision!;\n    if (precision <= 9) {\n      return Buffer.from([0x05]);\n    } else if (precision <= 19) {\n      return Buffer.from([0x09]);\n    } else if (precision <= 28) {\n      return Buffer.from([0x0D]);\n    } else {\n      return Buffer.from([0x11]);\n    }\n  },\n\n  * generateParameterData(parameter, options) {\n    if (parameter.value == null) {\n      return;\n    }\n\n    const sign = parameter.value < 0 ? 0 : 1;\n    const value = Math.round(Math.abs(parameter.value * Math.pow(10, parameter.scale!)));\n    if (parameter.precision! <= 9) {\n      const buffer = Buffer.alloc(5);\n      buffer.writeUInt8(sign, 0);\n      buffer.writeUInt32LE(value, 1);\n      yield buffer;\n    } else if (parameter.precision! <= 19) {\n      const buffer = new WritableTrackingBuffer(10);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      yield buffer.data;\n    } else if (parameter.precision! <= 28) {\n      const buffer = new WritableTrackingBuffer(14);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    } else {\n      const buffer = new WritableTrackingBuffer(18);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    }\n  },\n\n  validate: function(value): null | number {\n    if (value == null) {\n      return null;\n    }\n    value = parseFloat(value);\n    if (isNaN(value)) {\n      throw new TypeError('Invalid number.');\n    }\n    return value;\n  }\n};\n\nexport default Numeric;\nmodule.exports = Numeric;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}