{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _decimaln = _interopRequireDefault(require(\"./decimaln\"));\nvar _writableTrackingBuffer = _interopRequireDefault(require(\"../tracking-buffer/writable-tracking-buffer\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nconst NULL_LENGTH = Buffer.from([0x00]);\nconst Decimal = {\n  id: 0x37,\n  type: 'DECIMAL',\n  name: 'Decimal',\n  declaration: function (parameter) {\n    return 'decimal(' + this.resolvePrecision(parameter) + ', ' + this.resolveScale(parameter) + ')';\n  },\n  resolvePrecision: function (parameter) {\n    if (parameter.precision != null) {\n      return parameter.precision;\n    } else if (parameter.value === null) {\n      return 1;\n    } else {\n      return 18;\n    }\n  },\n  resolveScale: function (parameter) {\n    if (parameter.scale != null) {\n      return parameter.scale;\n    } else {\n      return 0;\n    }\n  },\n  generateTypeInfo(parameter, _options) {\n    let precision;\n    if (parameter.precision <= 9) {\n      precision = 0x05;\n    } else if (parameter.precision <= 19) {\n      precision = 0x09;\n    } else if (parameter.precision <= 28) {\n      precision = 0x0D;\n    } else {\n      precision = 0x11;\n    }\n    return Buffer.from([_decimaln.default.id, precision, parameter.precision, parameter.scale]);\n  },\n  generateParameterLength(parameter, options) {\n    if (parameter.value == null) {\n      return NULL_LENGTH;\n    }\n    const precision = parameter.precision;\n    if (precision <= 9) {\n      return Buffer.from([0x05]);\n    } else if (precision <= 19) {\n      return Buffer.from([0x09]);\n    } else if (precision <= 28) {\n      return Buffer.from([0x0D]);\n    } else {\n      return Buffer.from([0x11]);\n    }\n  },\n  *generateParameterData(parameter, options) {\n    if (parameter.value == null) {\n      return;\n    }\n    const sign = parameter.value < 0 ? 0 : 1;\n    const value = Math.round(Math.abs(parameter.value * Math.pow(10, parameter.scale)));\n    const precision = parameter.precision;\n    if (precision <= 9) {\n      const buffer = Buffer.alloc(5);\n      buffer.writeUInt8(sign, 0);\n      buffer.writeUInt32LE(value, 1);\n      yield buffer;\n    } else if (precision <= 19) {\n      const buffer = new _writableTrackingBuffer.default(9);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      yield buffer.data;\n    } else if (precision <= 28) {\n      const buffer = new _writableTrackingBuffer.default(13);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    } else {\n      const buffer = new _writableTrackingBuffer.default(17);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    }\n  },\n  validate: function (value) {\n    if (value == null) {\n      return null;\n    }\n    value = parseFloat(value);\n    if (isNaN(value)) {\n      throw new TypeError('Invalid number.');\n    }\n    return value;\n  }\n};\nvar _default = Decimal;\nexports.default = _default;\nmodule.exports = Decimal;","map":{"version":3,"names":["_decimaln","_interopRequireDefault","require","_writableTrackingBuffer","NULL_LENGTH","Buffer","from","Decimal","id","type","name","declaration","parameter","resolvePrecision","resolveScale","precision","value","scale","generateTypeInfo","_options","default","generateParameterLength","options","generateParameterData","sign","Math","round","abs","pow","buffer","alloc","writeUInt8","writeUInt32LE","writeUInt64LE","data","validate","parseFloat","isNaN","TypeError","module","exports"],"sources":["/Users/shahwalikhan/Desktop/my-app/node_modules/tedious/src/data-types/decimal.ts"],"sourcesContent":["import { DataType } from '../data-type';\nimport DecimalN from './decimaln';\nimport WritableTrackingBuffer from '../tracking-buffer/writable-tracking-buffer';\n\nconst NULL_LENGTH = Buffer.from([0x00]);\n\nconst Decimal: DataType & { resolvePrecision: NonNullable<DataType['resolvePrecision']>, resolveScale: NonNullable<DataType['resolveScale']> } = {\n  id: 0x37,\n  type: 'DECIMAL',\n  name: 'Decimal',\n\n  declaration: function(parameter) {\n    return 'decimal(' + (this.resolvePrecision(parameter)) + ', ' + (this.resolveScale(parameter)) + ')';\n  },\n\n  resolvePrecision: function(parameter) {\n    if (parameter.precision != null) {\n      return parameter.precision;\n    } else if (parameter.value === null) {\n      return 1;\n    } else {\n      return 18;\n    }\n  },\n\n  resolveScale: function(parameter) {\n    if (parameter.scale != null) {\n      return parameter.scale;\n    } else {\n      return 0;\n    }\n  },\n\n  generateTypeInfo(parameter, _options) {\n    let precision;\n    if (parameter.precision! <= 9) {\n      precision = 0x05;\n    } else if (parameter.precision! <= 19) {\n      precision = 0x09;\n    } else if (parameter.precision! <= 28) {\n      precision = 0x0D;\n    } else {\n      precision = 0x11;\n    }\n\n    return Buffer.from([DecimalN.id, precision, parameter.precision!, parameter.scale!]);\n  },\n\n  generateParameterLength(parameter, options) {\n    if (parameter.value == null) {\n      return NULL_LENGTH;\n    }\n\n    const precision = parameter.precision!;\n    if (precision <= 9) {\n      return Buffer.from([0x05]);\n    } else if (precision <= 19) {\n      return Buffer.from([0x09]);\n    } else if (precision <= 28) {\n      return Buffer.from([0x0D]);\n    } else {\n      return Buffer.from([0x11]);\n    }\n  },\n\n  * generateParameterData(parameter, options) {\n    if (parameter.value == null) {\n      return;\n    }\n\n    const sign = parameter.value < 0 ? 0 : 1;\n    const value = Math.round(Math.abs(parameter.value * Math.pow(10, parameter.scale!)));\n    const precision = parameter.precision!;\n    if (precision <= 9) {\n      const buffer = Buffer.alloc(5);\n      buffer.writeUInt8(sign, 0);\n      buffer.writeUInt32LE(value, 1);\n      yield buffer;\n    } else if (precision <= 19) {\n      const buffer = new WritableTrackingBuffer(9);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      yield buffer.data;\n    } else if (precision <= 28) {\n      const buffer = new WritableTrackingBuffer(13);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    } else {\n      const buffer = new WritableTrackingBuffer(17);\n      buffer.writeUInt8(sign);\n      buffer.writeUInt64LE(value);\n      buffer.writeUInt32LE(0x00000000);\n      buffer.writeUInt32LE(0x00000000);\n      yield buffer.data;\n    }\n  },\n\n  validate: function(value): number | null {\n    if (value == null) {\n      return null;\n    }\n    value = parseFloat(value);\n    if (isNaN(value)) {\n      throw new TypeError('Invalid number.');\n    }\n    return value;\n  }\n};\n\nexport default Decimal;\nmodule.exports = Decimal;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}